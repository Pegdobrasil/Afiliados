<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <title>Quem Somos – Peg do Brasil | Painel Afiliados</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="Conheça a Peg do Brasil e entenda como funciona o Painel de Afiliados e a integração com a Bling." />

  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <script src="https://unpkg.com/lucide@latest"></script>

  <style>
    body { font-family: 'Inter', sans-serif; }

    /* Scrollbar dark */
    ::-webkit-scrollbar { width: 8px; }
    ::-webkit-scrollbar-track { background: #020617; }
    ::-webkit-scrollbar-thumb { background: #334155; border-radius: 4px; }
    ::-webkit-scrollbar-thumb:hover { background: #475569; }

    .fade-in-up {
      animation: fadeInUp 0.6s cubic-bezier(0.16, 1, 0.3, 1) forwards;
      opacity: 0;
      transform: translateY(18px);
    }
    @keyframes fadeInUp { to { opacity: 1; transform: translateY(0); } }

    .text-gradient {
      background-clip: text;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-image: linear-gradient(to right, #38bdf8, #818cf8);
    }

    /* Inputs dark (mesmo padrão do seu layout) */
    .input-dark {
      background-color: rgb(15 23 42);
      border-color: rgb(51 65 85);
      color: rgb(241 245 249);
    }
    .input-dark:focus {
      border-color: rgb(14 165 233);
      outline: 2px solid rgba(14, 165, 233, 0.4);
      outline-offset: -1px;
    }
    .input-dark::placeholder { color: rgb(100 116 139); }

    /* WhatsApp flutuante */
    .whatsapp-link {
      position: fixed;
      width: 60px;
      height: 60px;
      bottom: 40px;
      right: 40px;
      background-color: #25d366;
      color: #FFF;
      border-radius: 50px;
      text-align: center;
      font-size: 30px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.5);
      z-index: 1000;
      display: flex;
      align-items: center;
      justify-content: center;
      text-decoration: none;
      animation: pulse-green 2s infinite;
      transition: transform 0.3s ease;
    }
    .whatsapp-link:hover { transform: scale(1.08); background-color: #20ba5a; }
    .whatsapp-icon { width: 35px; height: 35px; fill: white; }
    @keyframes pulse-green {
      0% { transform: scale(1); box-shadow: 0 0 0 0 rgba(37, 211, 102, 0.7); }
      70% { transform: scale(1); box-shadow: 0 0 0 15px rgba(37, 211, 102, 0); }
      100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(37, 211, 102, 0); }
    }
    @media (max-width: 768px) {
      .whatsapp-link { bottom: 20px; right: 20px; width: 50px; height: 50px; }
      .whatsapp-icon { width: 28px; height: 28px; }
    }

    /* Toast */
    .toast {
      position: fixed;
      left: 50%;
      bottom: 18px;
      transform: translateX(-50%);
      z-index: 2000;
      min-width: 280px;
      max-width: calc(100vw - 32px);
      display: none;
    }
    .toast.show { display: block; }
  </style>
</head>

<body class="bg-gradient-to-br from-slate-950 via-sky-950 to-indigo-950 min-h-screen flex items-center justify-center p-4">
  <div class="fade-in-up w-full max-w-6xl bg-slate-950/90 backdrop-blur-xl border border-slate-800/60 rounded-3xl shadow-2xl shadow-black/80 flex flex-col overflow-hidden relative h-[90vh] md:h-auto md:max-h-[90vh]">

    <!-- HEADER -->
    <header class="border-b border-slate-800/80 bg-slate-950/80 backdrop-blur-md sticky top-0 z-20 shrink-0">
      <div class="px-6 md:px-8 py-5 flex items-center justify-between">
        <div class="flex items-center gap-4">
          <div class="w-11 h-11 rounded-2xl bg-slate-900 border border-slate-700/50 flex items-center justify-center shadow-lg overflow-hidden shrink-0 group">
            <img
              src="https://pegdobrasil.cdn.magazord.com.br/img/2025/11/produto/161412/logobonita-e-formosa.png"
              alt="Peg do Brasil"
              class="w-full h-full object-contain p-1.5 transition-transform duration-500 group-hover:scale-110"
            />
          </div>
          <div class="leading-tight">
            <p class="text-sm font-bold text-slate-100 tracking-wide">Peg do Brasil</p>
            <p class="text-[10px] text-sky-400 font-medium tracking-widest uppercase">Distribuidora</p>
          </div>
        </div>

        <nav class="flex items-center gap-3 text-sm font-medium">
          <a href="index.html" class="px-4 py-2 text-slate-400 hover:text-white transition flex items-center gap-2 hover:bg-slate-800/50 rounded-lg">
            <i data-lucide="arrow-left" class="w-4 h-4"></i>
            Voltar
          </a>

          <button id="openLoginModal" class="px-4 py-2 text-slate-400 hover:text-white transition flex items-center gap-2 group hover:bg-slate-800/50 rounded-lg cursor-pointer">
            <i data-lucide="log-in" class="w-4 h-4 group-hover:stroke-sky-400 transition"></i>
            Login
          </button>

          <button id="openCadastroModal" class="flex items-center gap-2 px-6 py-2.5 rounded-xl bg-sky-600 hover:bg-sky-500 text-white shadow-lg shadow-sky-900/30 transition transform hover:-translate-y-0.5 active:scale-95 text-xs font-bold tracking-wide border border-sky-500/50 cursor-pointer">
            <i data-lucide="user-plus" class="w-4 h-4"></i>
            CRIAR CADASTRO
          </button>
        </nav>
      </div>
    </header>

    <!-- CONTEÚDO -->
    <main class="flex-1 overflow-y-auto bg-slate-950/40 scroll-smooth">

      <!-- HERO -->
      <section class="relative px-6 md:px-10 py-14 border-b border-slate-800/60 overflow-hidden">
        <div class="absolute top-0 right-0 w-96 h-96 bg-sky-600/10 blur-[100px] rounded-full pointer-events-none -z-10"></div>

        <div class="max-w-5xl mx-auto grid md:grid-cols-2 gap-12 items-center">
          <div class="space-y-6 relative z-10">
            <span class="inline-flex items-center gap-2 text-[10px] font-bold tracking-widest uppercase text-sky-400 bg-sky-500/10 border border-sky-500/20 rounded-full px-3 py-1">
              <span class="w-1.5 h-1.5 rounded-full bg-sky-400 animate-pulse"></span>
              Informações institucionais
            </span>

            <h1 class="text-3xl md:text-5xl font-bold tracking-tight text-slate-50 leading-[1.1]">
              Quem Somos<br class="hidden lg:block"/>
              <span class="text-gradient">Peg do Brasil</span>
            </h1>

            <p class="text-sm md:text-base text-slate-400 leading-relaxed font-light border-l-2 border-slate-800 pl-4">
              A Peg do Brasil é uma distribuidora especializada em acessórios para celular e eletrônicos de pequeno porte,
              com mais de 20 anos de atuação no mercado. Nosso foco é atender revendedores, lojistas e assistências técnicas,
              com catálogo estruturado e processos logísticos organizados.
            </p>

            <div class="pt-2 flex flex-wrap gap-3">
              <a href="https://www.pegdobrasil.com.br" target="_blank"
                 class="inline-flex items-center gap-2 px-6 py-3 text-sm font-semibold rounded-xl bg-sky-500 hover:bg-sky-400 text-slate-950 shadow-lg shadow-sky-500/20 transform hover:-translate-y-1 transition-all duration-200">
                Acessar site
                <i data-lucide="arrow-right" class="w-4 h-4"></i>
              </a>

              <button id="btnCopySite"
                 class="inline-flex items-center gap-2 px-6 py-3 text-sm font-semibold rounded-xl border border-slate-700 text-slate-200 hover:bg-slate-900 transition">
                Copiar link do site
                <i data-lucide="copy" class="w-4 h-4"></i>
              </button>
            </div>
          </div>

          <div class="relative">
            <div class="bg-slate-900/60 backdrop-blur-sm border border-slate-800 rounded-2xl p-6 md:p-8 relative hover:border-sky-500/20 transition duration-500">
              <h3 class="text-xs font-bold text-slate-500 uppercase tracking-widest mb-6">Nossos pilares</h3>

              <div class="space-y-6">
                <div class="flex gap-4">
                  <div class="w-10 h-10 rounded-lg bg-sky-500/10 flex items-center justify-center shrink-0 border border-sky-500/20">
                    <i data-lucide="box" class="w-5 h-5 text-sky-400"></i>
                  </div>
                  <div>
                    <h4 class="text-slate-200 font-semibold text-sm">Distribuição em escala</h4>
                    <p class="text-xs text-slate-400 mt-1 leading-relaxed">
                      Estoque profundo voltado para giro e constância de linha na sua prateleira.
                    </p>
                  </div>
                </div>

                <div class="flex gap-4">
                  <div class="w-10 h-10 rounded-lg bg-indigo-500/10 flex items-center justify-center shrink-0 border border-indigo-500/20">
                    <i data-lucide="monitor-smartphone" class="w-5 h-5 text-indigo-400"></i>
                  </div>
                  <div>
                    <h4 class="text-slate-200 font-semibold text-sm">Tecnologia integrada</h4>
                    <p class="text-xs text-slate-400 mt-1 leading-relaxed">
                      Painel para gerenciar pedidos e performance pensado no revendedor.
                    </p>
                  </div>
                </div>

                <div class="flex gap-4">
                  <div class="w-10 h-10 rounded-lg bg-emerald-500/10 flex items-center justify-center shrink-0 border border-emerald-500/20">
                    <i data-lucide="handshake" class="w-5 h-5 text-emerald-400"></i>
                  </div>
                  <div>
                    <h4 class="text-slate-200 font-semibold text-sm">Parceria comercial</h4>
                    <p class="text-xs text-slate-400 mt-1 leading-relaxed">
                      Atendimento voltado para volume e operação organizada para revenda.
                    </p>
                  </div>
                </div>
              </div>

              <div class="mt-6 pt-6 border-t border-slate-800/60 text-xs text-slate-500 leading-relaxed">
                Base operacional em Curitiba – PR, com atendimento a revendedores e expedição para todo o Brasil.
              </div>
            </div>
          </div>

        </div>
      </section>

      <!-- INTEGRAÇÃO BLING -->
      <section class="px-6 md:px-10 py-14 border-b border-slate-800/60">
        <div class="max-w-5xl mx-auto">
          <div class="flex flex-col md:flex-row items-start md:items-end justify-between gap-6 mb-8">
            <div>
              <p class="text-[10px] font-bold tracking-widest uppercase text-slate-500 mb-2">Aplicativo Bling</p>
              <h2 class="text-2xl md:text-3xl font-bold text-slate-100">Como ocorre a integração com a Bling</h2>
              <p class="text-sm text-slate-400 mt-2 max-w-3xl">
                A integração é realizada por autenticação OAuth. O usuário autoriza o aplicativo na Bling e a plataforma
                redireciona para uma URL de callback no backend do Painel de Afiliados (Railway). A partir desse retorno,
                o sistema realiza a troca das credenciais e mantém o acesso para execução das rotinas de sincronização.
              </p>
            </div>

            <button id="btnCopyRedirect"
              class="inline-flex items-center gap-2 px-5 py-2.5 rounded-xl border border-slate-700 text-slate-200 hover:bg-slate-900 text-xs font-semibold transition">
              <i data-lucide="copy" class="w-4 h-4"></i>
              Copiar callback
            </button>
          </div>

          <div class="grid sm:grid-cols-2 lg:grid-cols-4 gap-4">
            <div class="bg-slate-900/40 p-5 rounded-2xl border border-slate-800">
              <h4 class="font-semibold text-slate-200 text-sm mb-1 flex items-center gap-2">
                <i data-lucide="log-in" class="w-4 h-4 text-sky-300"></i> 1) Autorização
              </h4>
              <p class="text-xs text-slate-400 leading-relaxed">
                O usuário inicia o fluxo e concede acesso ao aplicativo na Bling.
              </p>
            </div>

            <div class="bg-slate-900/40 p-5 rounded-2xl border border-slate-800">
              <h4 class="font-semibold text-slate-200 text-sm mb-1 flex items-center gap-2">
                <i data-lucide="link" class="w-4 h-4 text-indigo-300"></i> 2) Callback
              </h4>
              <p class="text-xs text-slate-400 leading-relaxed">
                A Bling redireciona para o backend com parâmetros do processo.
              </p>
            </div>

            <div class="bg-slate-900/40 p-5 rounded-2xl border border-slate-800">
              <h4 class="font-semibold text-slate-200 text-sm mb-1 flex items-center gap-2">
                <i data-lucide="key" class="w-4 h-4 text-emerald-300"></i> 3) Token
              </h4>
              <p class="text-xs text-slate-400 leading-relaxed">
                O backend troca a autorização por credenciais e armazena com segurança.
              </p>
            </div>

            <div class="bg-slate-900/40 p-5 rounded-2xl border border-slate-800">
              <h4 class="font-semibold text-slate-200 text-sm mb-1 flex items-center gap-2">
                <i data-lucide="refresh-cw" class="w-4 h-4 text-slate-200"></i> 4) Rotinas
              </h4>
              <p class="text-xs text-slate-400 leading-relaxed">
                O sistema executa sincronizações conforme rotinas definidas no projeto.
              </p>
            </div>
          </div>

          <div class="mt-7 bg-slate-900/40 border border-slate-800 rounded-2xl p-6">
            <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-3">
              <div>
                <p class="text-xs font-semibold text-slate-200 mb-1">URL de redirecionamento (callback)</p>
                <code id="redirectUrl" class="text-xs text-slate-300">
                  https://painel-afiliados-production.up.railway.app/api/bling/callback
                </code>
              </div>
              <button id="btnCopyRedirect2"
                class="inline-flex items-center justify-center gap-2 px-5 py-2.5 rounded-xl bg-sky-500 hover:bg-sky-400 text-slate-950 text-xs font-bold transition">
                <i data-lucide="copy" class="w-4 h-4"></i>
                Copiar
              </button>
            </div>
          </div>

        </div>
      </section>

      <!-- CTA FINAL -->
      <section class="px-6 md:px-10 py-12 bg-slate-950 border-t border-slate-900">
        <div class="max-w-4xl mx-auto flex flex-col md:flex-row items-center justify-between gap-8 bg-slate-900/50 p-8 rounded-3xl border border-slate-800">
          <div class="text-center md:text-left">
            <h2 class="text-lg font-bold text-slate-100 mb-1">Pronto para crescer com a Peg?</h2>
            <p class="text-sm text-slate-400">Crie seu acesso e comece a operar pelo Painel de Afiliados.</p>
          </div>
          <div class="flex flex-col sm:flex-row gap-3 shrink-0">
            <button id="ctaCadastro"
               class="inline-flex items-center justify-center px-6 py-2.5 text-xs font-bold uppercase tracking-wide rounded-lg bg-sky-500 hover:bg-sky-400 text-slate-950 shadow-lg shadow-sky-500/20 transition cursor-pointer">
              Criar meu acesso
            </button>
            <button id="ctaLogin"
               class="inline-flex items-center justify-center px-6 py-2.5 text-xs font-bold uppercase tracking-wide rounded-lg border border-slate-700 text-slate-300 hover:bg-slate-800 transition cursor-pointer">
              Fazer login
            </button>
          </div>
        </div>
      </section>
    </main>

    <!-- RODAPÉ -->
    <footer class="bg-slate-950 border-t border-slate-900 shrink-0">
      <div class="max-w-6xl mx-auto px-6 py-5 text-[10px] md:text-xs text-slate-600 flex flex-col md:flex-row gap-2 md:items-center md:justify-between text-center md:text-left">
        <p>© 2025 Peg do Brasil – Distribuidora de Acessórios.</p>
        <p class="flex items-center justify-center gap-1.5">
          <i data-lucide="clock" class="w-3 h-3"></i>
          Seg-Sex 09:00–18:00 • Sáb 09:00–13:00 • Curitiba – PR
        </p>
      </div>
    </footer>

    <!-- MODAL LOGIN -->
    <div id="loginModal" class="fixed inset-0 bg-black/80 backdrop-blur-sm hidden justify-center items-start pt-10 md:pt-16 overflow-y-auto z-50 transition-opacity duration-300">
      <div class="fade-in-up w-full max-w-md bg-slate-950 border border-slate-800 rounded-2xl shadow-2xl shadow-black/60 flex flex-col overflow-hidden relative p-8 mx-4">
        <button id="closeLoginModal" type="button" class="absolute top-4 right-4 text-slate-500 hover:text-slate-200 p-1 hover:bg-slate-900 rounded-lg transition">
          <i data-lucide="x" class="w-5 h-5"></i>
        </button>

        <div class="text-center mb-8">
          <div class="flex justify-center mb-4">
            <img src="https://pegdobrasil.cdn.magazord.com.br/img/2025/11/produto/161412/logobonita-e-formosa.png" alt="Peg do Brasil" class="h-14 w-auto mx-auto opacity-90">
          </div>
          <h1 class="text-xl font-bold text-slate-50">Bem-vindo de volta</h1>
          <p class="text-slate-400 text-xs mt-1">Acesse o Painel de Afiliados</p>
        </div>

        <div class="space-y-4">
          <div>
            <label class="block text-xs font-medium text-slate-300 mb-1.5 ml-1">Email</label>
            <div class="relative">
              <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none text-slate-500">
                <i data-lucide="mail" class="w-4 h-4"></i>
              </div>
              <input id="email_login" type="email" placeholder="seu@email.com"
                class="w-full pl-10 pr-4 py-2.5 text-sm border border-slate-700 rounded-lg text-slate-100 placeholder-slate-600 focus:outline-none focus:border-sky-500 focus:ring-1 focus:ring-sky-500 bg-slate-900/50 input-dark">
            </div>
          </div>

          <div>
            <label class="block text-xs font-medium text-slate-300 mb-1.5 ml-1">Senha</label>
            <div class="relative">
              <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none text-slate-500">
                <i data-lucide="lock" class="w-4 h-4"></i>
              </div>
              <input id="senha_login" type="password" placeholder="••••••••"
                class="w-full pl-10 pr-10 py-2.5 text-sm border border-slate-700 rounded-lg text-slate-100 placeholder-slate-600 focus:outline-none focus:border-sky-500 focus:ring-1 focus:ring-sky-500 bg-slate-900/50 input-dark">
              <button type="button" id="btnToggleLoginPassword"
                class="absolute inset-y-0 right-0 pr-3 flex items-center text-slate-500 hover:text-slate-300 cursor-pointer">
                <i id="eye-icon-login" data-lucide="eye" class="w-4 h-4"></i>
              </button>
            </div>
          </div>

          <button type="button" id="btnDoLogin"
            class="w-full bg-sky-600 hover:bg-sky-500 text-white font-medium py-3 rounded-lg shadow-lg shadow-sky-900/20 transition-all text-sm mt-2">
            Entrar
          </button>
        </div>

        <div class="mt-6 text-center">
          <p class="text-xs text-slate-500">
            Ainda não tem acesso?
            <button id="btnGoCadastroFromLogin" class="text-sky-400 hover:text-sky-300 font-medium transition-colors cursor-pointer">
              Cadastre-se
            </button>
          </p>
        </div>
      </div>
    </div>

    <!-- MODAL CADASTRO (usa auth.js para registrar() e buscarCep()) -->
    <div id="cadastroModal" class="fixed inset-0 bg-black/80 backdrop-blur-sm hidden justify-center items-start pt-5 md:pt-10 overflow-y-auto z-50 transition-opacity duration-300">
      <div class="fade-in-up w-full max-w-2xl bg-slate-950 border border-slate-800 rounded-2xl shadow-2xl shadow-black/60 flex flex-col overflow-hidden relative p-8 mx-4 mb-10">

        <button id="closeCadastroModal" type="button" class="absolute top-4 right-4 text-slate-500 hover:text-slate-200 p-1 hover:bg-slate-900 rounded-lg transition z-10">
          <i data-lucide="x" class="w-5 h-5"></i>
        </button>

        <div class="text-center mb-6">
          <img
            src="https://pegdobrasil.cdn.magazord.com.br/img/2025/11/produto/161412/logobonita-e-formosa.png"
            alt="PEG do Brasil"
            class="h-10 w-auto mx-auto drop-shadow-md mb-2"
          >
          <h1 class="text-xl font-bold text-slate-50">Crie sua conta</h1>
          <p class="text-slate-400 text-xs mt-1">Preencha os dados abaixo para se tornar um afiliado.</p>
        </div>

        <div class="space-y-6">
          <section class="space-y-4">
            <h2 class="text-xs font-semibold text-sky-400 uppercase tracking-wider flex items-center gap-2 pb-2 border-b border-slate-800">
              <i data-lucide="user" class="w-3 h-3"></i> Dados pessoais
            </h2>

            <!-- IMPORTANTE: auth.js espera este id -->
            <select id="tipo_pessoa" class="hidden"><option value="PF">PF</option><option value="PJ">PJ</option></select>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
              <div class="relative">
                <label class="block text-xs font-medium text-slate-300 mb-1.5 ml-1">CPF ou CNPJ</label>
                <input id="cpf_cnpj" type="text" placeholder="Apenas números" maxlength="18" class="w-full px-3 py-2.5 text-sm rounded-lg input-dark focus:outline-none transition-all">
                <span id="cpf-cnpj-error" class="hidden absolute -bottom-4 left-1 text-[9px] text-red-400 font-medium">Inválido</span>
              </div>

              <div>
                <label class="block text-xs font-medium text-slate-300 mb-1.5 ml-1">Nome completo ou razão social</label>
                <input id="nome" type="text" placeholder="Seu nome" class="w-full px-3 py-2.5 text-sm rounded-lg input-dark focus:outline-none transition-all">
              </div>

              <!-- IMPORTANTE: auth.js espera id="email" no cadastro -->
              <div class="relative">
                <label class="block text-xs font-medium text-slate-300 mb-1.5 ml-1">Email</label>
                <input id="email" type="email" placeholder="seu@email.com" class="w-full px-3 py-2.5 text-sm rounded-lg input-dark focus:outline-none transition-all">
                <span id="email-error" class="hidden absolute -bottom-4 left-1 text-[9px] text-red-400 font-medium">Email inválido</span>
              </div>

              <div>
                <label class="block text-xs font-medium text-slate-300 mb-1.5 ml-1">Telefone ou celular</label>
                <input id="telefone" type="tel" maxlength="15" class="w-full px-3 py-2.5 text-sm rounded-lg input-dark focus:outline-none transition-all">
              </div>

              <!-- IMPORTANTE: auth.js espera id="senha" no cadastro -->
              <div class="md:col-span-2 relative">
                <label class="block text-xs font-medium text-slate-300 mb-1.5 ml-1">Senha</label>
                <input id="senha" type="password" placeholder="********" class="w-full px-3 py-2.5 text-sm rounded-lg input-dark focus:outline-none transition-all">
                <span id="senha-error" class="hidden text-[9px] text-red-400 font-medium ml-1 mt-1 block">Mínimo 8 caracteres</span>
              </div>
            </div>
          </section>

          <section class="space-y-4">
            <h2 class="text-xs font-semibold text-sky-400 uppercase tracking-wider flex items-center gap-2 pb-2 border-b border-slate-800">
              <i data-lucide="map-pin" class="w-3 h-3"></i> Endereço
            </h2>

            <div class="grid grid-cols-4 gap-4">
              <div class="col-span-2">
                <label class="block text-xs font-medium text-slate-300 mb-1.5 ml-1">CEP</label>
                <input id="cep" type="text" placeholder="00000-000" onblur="buscarCep()" maxlength="9"
                  class="w-full px-3 py-2.5 text-sm rounded-lg input-dark focus:outline-none transition-all">
              </div>

              <div class="col-span-2">
                <label class="block text-xs font-medium text-slate-300 mb-1.5 ml-1">Número</label>
                <input id="numero" type="text" class="w-full px-3 py-2.5 text-sm rounded-lg input-dark focus:outline-none transition-all">
              </div>

              <div class="col-span-4">
                <label class="block text-xs font-medium text-slate-300 mb-1.5 ml-1">Logradouro</label>
                <input id="logradouro" type="text" class="w-full px-3 py-2.5 text-sm rounded-lg input-dark focus:outline-none transition-all">
              </div>

              <div class="col-span-2">
                <label class="block text-xs font-medium text-slate-300 mb-1.5 ml-1">Bairro</label>
                <input id="bairro" type="text" class="w-full px-3 py-2.5 text-sm rounded-lg input-dark focus:outline-none transition-all">
              </div>

              <div class="col-span-1">
                <label class="block text-xs font-medium text-slate-300 mb-1.5 ml-1">Cidade</label>
                <input id="cidade" type="text" class="w-full px-3 py-2.5 text-sm rounded-lg input-dark focus:outline-none transition-all">
              </div>

              <div class="col-span-1">
                <label class="block text-xs font-medium text-slate-300 mb-1.5 ml-1">UF</label>
                <input id="uf" type="text" maxlength="2" class="w-full px-3 py-2.5 text-sm rounded-lg input-dark focus:outline-none transition-all uppercase text-center">
              </div>

              <div class="col-span-4">
                <label class="block text-xs font-medium text-slate-300 mb-1.5 ml-1">Complemento</label>
                <input id="complemento" type="text" placeholder="Apto, Bloco..." class="w-full px-3 py-2.5 text-sm rounded-lg input-dark focus:outline-none transition-all">
              </div>
            </div>
          </section>

          <button type="button" onclick="registrar()"
            class="w-full bg-sky-600 hover:bg-sky-500 text-white font-bold py-3.5 rounded-xl shadow-lg shadow-sky-900/20 transition-all text-sm mt-4 transform hover:-translate-y-0.5">
            Salvar cadastro
          </button>
        </div>

        <div class="mt-4 text-center">
          <p class="text-xs text-slate-500">
            Já tem conta?
            <button id="btnGoLoginFromCadastro" class="text-sky-400 hover:text-sky-300 font-medium transition-colors cursor-pointer">
              Faça login
            </button>
          </p>
        </div>
      </div>
    </div>

  </div>

  <!-- WhatsApp -->
  <a href="http://wa.me/5541988849099" target="_blank" class="whatsapp-link" aria-label="Atendimento via WhatsApp">
    <svg class="whatsapp-icon" viewBox="0 0 448 512" xmlns="http://www.w3.org/2000/svg">
      <path d="M380.9 97.1C339 55.1 283.2 32 223.9 32c-122.4 0-222 99.6-222 222 0 39.1 10.2 77.3 29.6 111L0 480l117.7-30.9c32.4 17.7 68.9 27 106.1 27h.1c122.3 0 224.1-99.6 224.1-222 0-59.3-25.2-115-67.1-157zm-157 341.6c-33.2 0-65.7-8.9-94-25.7l-6.7-4-69.8 18.3L72 359.2l-4.4-7c-18.5-29.4-28.2-63.3-28.2-98.2 0-101.7 82.8-184.5 184.6-184.5 49.3 0 95.6 19.2 130.4 54.1 34.8 34.9 56.2 81.2 56.1 130.5 0 101.8-84.9 184.6-186.6 184.6zm101.2-138.2c-5.5-2.8-32.8-16.2-37.9-18-5.1-1.9-8.8-2.8-12.5 2.8-3.7 5.6-14.3 18-17.6 21.8-3.2 3.7-6.5 4.2-12 1.4-32.6-16.3-54-29.1-75.5-66-5.7-9.8 5.7-9.1 16.3-30.3 1.8-3.7.9-6.9-.5-9.7-1.4-2.8-12.5-30.1-17.1-41.2-4.5-10.8-9.1-9.3-12.5-9.5-3.2-.2-6.9-.2-10.6-.2-3.7 0-9.7 1.4-14.8 6.9-5.1 5.6-19.4 19-19.4 46.3 0 27.3 19.9 53.7 22.6 57.4 2.8 3.7 39.1 59.7 94.8 83.8 35.2 15.2 49 16.5 66.6 13.9 10.7-1.6 32.8-13.4 37.4-26.4 4.6-13 4.6-24.1 3.2-26.4-1.3-2.5-5-3.9-10.5-6.6z"/>
    </svg>
  </a>

  <!-- Toast -->
  <div id="toast" class="toast">
    <div class="bg-slate-950 border border-slate-800 text-slate-200 rounded-xl px-4 py-3 shadow-2xl shadow-black/60 flex items-center gap-2 text-xs">
      <i data-lucide="check" class="w-4 h-4 text-emerald-400"></i>
      <span id="toastText">Copiado.</span>
    </div>
  </div>

  <!-- auth.js (mantido e necessário para cadastro) -->
  <script src="auth.js"></script>

  <script>
    // Ícones
    if (window.lucide) lucide.createIcons();

    // ====== MODAIS ======
    const openLoginBtn = document.getElementById('openLoginModal');
    const loginModal = document.getElementById('loginModal');
    const closeLoginBtn = document.getElementById('closeLoginModal');

    const openCadastroBtn = document.getElementById('openCadastroModal');
    const cadastroModal = document.getElementById('cadastroModal');
    const closeCadastroBtn = document.getElementById('closeCadastroModal');

    const ctaCadastro = document.getElementById('ctaCadastro');
    const ctaLogin = document.getElementById('ctaLogin');

    function openModal(modal) {
      modal.classList.remove('hidden');
      modal.classList.add('flex');
      if (window.lucide) lucide.createIcons();
    }
    function closeModal(modal) {
      modal.classList.add('hidden');
      modal.classList.remove('flex');
    }

    if (openLoginBtn) openLoginBtn.addEventListener('click', () => openModal(loginModal));
    if (closeLoginBtn) closeLoginBtn.addEventListener('click', () => closeModal(loginModal));
    if (loginModal) loginModal.addEventListener('click', (e) => { if (e.target === loginModal) closeModal(loginModal); });

    if (openCadastroBtn) openCadastroBtn.addEventListener('click', () => openModal(cadastroModal));
    if (closeCadastroBtn) closeCadastroBtn.addEventListener('click', () => closeModal(cadastroModal));
    if (cadastroModal) cadastroModal.addEventListener('click', (e) => { if (e.target === cadastroModal) closeModal(cadastroModal); });

    if (ctaCadastro) ctaCadastro.addEventListener('click', () => openModal(cadastroModal));
    if (ctaLogin) ctaLogin.addEventListener('click', () => openModal(loginModal));

    // Troca rápida entre modais
    const btnGoCadastroFromLogin = document.getElementById('btnGoCadastroFromLogin');
    const btnGoLoginFromCadastro = document.getElementById('btnGoLoginFromCadastro');

    if (btnGoCadastroFromLogin) {
      btnGoCadastroFromLogin.addEventListener('click', () => {
        closeModal(loginModal);
        setTimeout(() => openModal(cadastroModal), 150);
      });
    }
    if (btnGoLoginFromCadastro) {
      btnGoLoginFromCadastro.addEventListener('click', () => {
        closeModal(cadastroModal);
        setTimeout(() => openModal(loginModal), 150);
      });
    }

    // ====== LOGIN (modal) ======
    // auth.js de login usa ids "email" e "senha" (tela index), aqui usamos ids "email_login" e "senha_login",
    // então fazemos o login do modal aqui, mas guardamos a sessão no mesmo formato do auth.js. :contentReference[oaicite:1]{index=1}
    const API_BASE = "https://painel-afiliados-production.up.railway.app/api";

    function notify(msg) { alert(msg); }

    async function loginModalSubmit() {
      const email = (document.getElementById('email_login')?.value || '').trim();
      const senha = (document.getElementById('senha_login')?.value || '').trim();

      if (!email || !senha) {
        notify("Informe email e senha.");
        return;
      }

      try {
        const res = await fetch(`${API_BASE}/auth/login`, {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ email, senha }),
        });

        if (!res.ok) {
          const err = await res.json().catch(() => null);
          notify(err?.detail || "Não foi possível fazer login.");
          return;
        }

        const data = await res.json().catch(() => null);
        if (!data || data.status !== "success") {
          notify("Não foi possível fazer login.");
          return;
        }

        localStorage.setItem(
          "painel_afiliado_session",
          JSON.stringify({
            id: data.id,
            nome: data.nome,
            email: data.email,
            token: data.token,
            logged_at: new Date().toISOString(),
          })
        );

        window.location.href = "painel.html";
      } catch (err) {
        console.error(err);
        notify("Erro de conexão ao tentar logar.");
      }
    }

    const btnDoLogin = document.getElementById('btnDoLogin');
    if (btnDoLogin) btnDoLogin.addEventListener('click', (e) => { e.preventDefault(); loginModalSubmit(); });

    // Enter no modal
    const emailLoginInput = document.getElementById('email_login');
    const senhaLoginInput = document.getElementById('senha_login');
    function handleEnter(ev) {
      if (ev.key === "Enter") {
        ev.preventDefault();
        loginModalSubmit();
      }
    }
    if (emailLoginInput) emailLoginInput.addEventListener('keyup', handleEnter);
    if (senhaLoginInput) senhaLoginInput.addEventListener('keyup', handleEnter);

    // Toggle senha (modal)
    const btnToggleLoginPassword = document.getElementById('btnToggleLoginPassword');
    if (btnToggleLoginPassword) {
      btnToggleLoginPassword.addEventListener('click', () => {
        const senhaInput = document.getElementById('senha_login');
        const eyeIcon = document.getElementById('eye-icon-login');
        if (!senhaInput) return;

        if (senhaInput.type === 'password') {
          senhaInput.type = 'text';
          if (eyeIcon) { eyeIcon.style.opacity = '1'; eyeIcon.style.color = '#38bdf8'; }
        } else {
          senhaInput.type = 'password';
          if (eyeIcon) { eyeIcon.style.opacity = ''; eyeIcon.style.color = ''; }
        }
      });
    }

    // ====== TOAST + COPY ======
    const toastEl = document.getElementById('toast');
    const toastText = document.getElementById('toastText');
    let toastTimer = null;

    function showToast(msg) {
      if (!toastEl || !toastText) return;
      toastText.textContent = msg || 'Feito.';
      toastEl.classList.add('show');
      if (window.lucide) lucide.createIcons();
      if (toastTimer) clearTimeout(toastTimer);
      toastTimer = setTimeout(() => toastEl.classList.remove('show'), 2200);
    }

    async function copyText(text) {
      try {
        await navigator.clipboard.writeText(text);
        showToast('Copiado para a área de transferência.');
      } catch (e) {
        const ta = document.createElement('textarea');
        ta.value = text;
        ta.style.position = 'fixed';
        ta.style.left = '-9999px';
        document.body.appendChild(ta);
        ta.focus();
        ta.select();
        try { document.execCommand('copy'); showToast('Copiado para a área de transferência.'); }
        catch (err) { showToast('Não foi possível copiar automaticamente.'); }
        finally { document.body.removeChild(ta); }
      }
    }

    const btnCopySite = document.getElementById('btnCopySite');
    if (btnCopySite) btnCopySite.addEventListener('click', () => copyText('https://www.pegdobrasil.com.br'));

    const redirectUrlEl = document.getElementById('redirectUrl');
    const redirectUrl = (redirectUrlEl ? redirectUrlEl.textContent.trim() : 'https://painel-afiliados-production.up.railway.app/api/bling/callback');

    const btnCopyRedirect = document.getElementById('btnCopyRedirect');
    const btnCopyRedirect2 = document.getElementById('btnCopyRedirect2');
    if (btnCopyRedirect) btnCopyRedirect.addEventListener('click', () => copyText(redirectUrl));
    if (btnCopyRedirect2) btnCopyRedirect2.addEventListener('click', () => copyText(redirectUrl));
  </script>
</body>
</html>
